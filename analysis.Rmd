---
title: "Untitled"
author: "NAudi"
date: "11/8/2018"
output: word_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
  
```

```{r}
# open needed libraries 
library(readxl)
library(tidyverse)
library(ggpubr)


```

```{r}
# importing data 

GBD_HIV <- read_excel("/Users/battou/Documents/MPH Brown /2018 Fall PHP 1100/Data analysis/project/data/Book2.xlsx", 
                      sheet = "Sheet2", col_types = c("numeric", 
                                                      "text", "numeric", "text", "blank", 
                                                      "blank", "blank", "blank", "blank", 
                                                      "text", "blank", "text", "numeric", 
                                                      "numeric", "numeric", "numeric"))
health_work_force <- read_excel("/Users/battou/Documents/MPH Brown /2018 Fall PHP 1100/Data analysis/project/data/Book2.xlsx", 
                                sheet = "Sheet1")
names(health_work_force )[1] <- c("location_name")

```

```{r}
# merging and cleaning data

merged <- left_join( x = GBD_HIV, y = health_work_force, by = "location_name" )
merged_clean <- merged[complete.cases(merged),]
names(merged_clean)[12] <- c("Nurses_midwives")
names(merged_clean)[14] <- c("Doctors_equivalents")
colnames(merged_clean)
```
```{r}
# descriptive analysis 



```


```{r}
# correlation matrix 
merged_corr <- merged_clean %>%
  select(location_id, measure_name, val,Doctors,Nurses_midwives, Total, Doctors_equivalents) %>%
  spread(key = measure_name, val)
 correlation_matrix <- round( cor(merged_corr), 3)

# best fit scatter plot
scatter_nurs_vs_mort <-  merged_clean %>%
  filter(measure_name == "Deaths") %>%
  ggscatter( y = "Nurses_midwives", x = "val",
            add = "reg.line", conf.int = TRUE, 
            cor.coef = TRUE, cor.method = "pearson",
            ylab =  "Estimated Nurses & midwives Density per 1000", xlab = "HIV Mortality rate per 100 0000")

# correlation -test
cor.test(merged_corr$Nurses_midwives, merged_corr$Deaths)
```
